name: Metrics
on:
    workflow_dispatch:

jobs:
    achievements:
        runs-on: ubuntu-latest
        permissions:
            contents: write
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.achievements.svg
                  token: ${{ secrets.METRICS_TOKEN }}
                  committer_token: ${{ secrets.GITHUB_TOKEN }}
                  user: lukecoopz
                  base: achievements
                  plugin_achievements: yes

    github-metrics:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.header.svg
                  # You'll need to setup a personal token in your secrets.
                  token: ${{ secrets.METRICS_TOKEN }}
                  # GITHUB_TOKEN is a special auto-generated token used for commits
                  committer_token: ${{ secrets.GITHUB_TOKEN }}

                  # Options
                  user: lukecoopz
                  template: classic
                  base: header
                  config_timezone: ${{ secrets.USER_TIMEZONE }}
    lines:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.lines-of-code.svg
                  token: ${{ secrets.METRICS_TOKEN }}
                  committer_token: ${{ secrets.GITHUB_TOKEN }}
                  base: "repositories"
                  plugin_lines: yes

    acti_comm:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.acti_comm.svg
                  # You'll need to setup a personal token in your secrets.
                  token: ${{ secrets.METRICS_TOKEN }}
                  # GITHUB_TOKEN is a special auto-generated token used for commits
                  committer_token: ${{ secrets.GITHUB_TOKEN }}

                  # Options
                  user: lukecoopz
                  template: classic
                  base: activity, community
                  config_timezone: ${{ secrets.USER_TIMEZONE }}

    iso_calender:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.iso_calender.svg
                  # You'll need to setup a personal token in your secrets.
                  token: ${{ secrets.METRICS_TOKEN }}
                  # GITHUB_TOKEN is a special auto-generated token used for commits
                  committer_token: ${{ secrets.GITHUB_TOKEN }}

                  # Options
                  user: lukecoopz
                  template: classic
                  base: ""
                  config_timezone: ${{ secrets.USER_TIMEZONE }}
                  plugin_isocalendar: yes
                  plugin_isocalendar_duration: half-year

    habits:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.habits.charts.svg
                  token: ${{ secrets.METRICS_TOKEN }}
                  base: ""
                  plugin_habits: yes
                  plugin_habits_facts: no
                  plugin_habits_charts: yes
                  config_timezone: ${{ secrets.USER_TIMEZONE }}

    issue_pr_lang:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.issue_pr_lang.svg
                  # You'll need to setup a personal token in your secrets.
                  token: ${{ secrets.METRICS_TOKEN }}
                  # GITHUB_TOKEN is a special auto-generated token used for commits
                  committer_token: ${{ secrets.GITHUB_TOKEN }}

                  # Options
                  user: lukecoopz
                  template: classic
                  base: ""
                  config_timezone: ${{ secrets.USER_TIMEZONE }}
                  plugin_followup: yes
                  plugin_languages: yes

    repositories:
        runs-on: ubuntu-latest
        steps:
            - uses: lowlighter/metrics@latest
              with:
                  filename: metrics.plugin.repositories.svg
                  token: ${{ secrets.METRICS_TOKEN }}
                  base: ""
                  plugin_repositories: yes
                  plugin_repositories_featured: lowlighter/metrics
